@if (isOpen)
{
    <ExerciseSelectorForm ActionText="@ActionText" Exercises="Exercises" OnExerciseSelected="OnExerciseSelected" OnCancel="ToggleView" />
}
else
{
    <MudButton Color="Color.Primary" OnClick="ToggleView" StartIcon="@Icons.Filled.Add" FullWidth="true" Class="py-2">@ActionText</MudButton>
}

@code
{
    private ExerciseViewModel selectedExercise;
    private bool isOpen = false;

    [Parameter]
    [EditorRequired]
    public string ActionText { get; set; }

    [Parameter]
    [EditorRequired]
    public IEnumerable<ExerciseViewModel> Exercises { get; set; }

    [Parameter]
    public EventCallback<ExerciseViewModel> OnExerciseSelected { get; set; }

    private async Task OnSelectionConfirmed()
    {
        await OnExerciseSelected.InvokeAsync(selectedExercise);
        ToggleView();
    }

    private void ToggleView()
    {
        selectedExercise = null;
        isOpen = !isOpen;
    }
}